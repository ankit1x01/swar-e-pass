<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Premium Entry Pass</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/qrcode-generator@1.4.4/qrcode.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Bebas+Neue&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --magenta:#FF1FB6; --bronze:#AF844B; --charcoal:#0F0F10; --ink:#121212;
      --vip:#FFD166; --gen:#A0AEC0;
    }
    *{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}

    body{
      min-height:100dvh; padding:18px; display:flex; align-items:center; justify-content:center;
      background:
        radial-gradient(1200px 600px at 20% 20%, #3b0764 0%, transparent 55%),
        radial-gradient(900px 550px at 80% 80%, #0b132b 0%, transparent 60%),
        linear-gradient(135deg,#0f172a 0%,#1e1b4b 30%,#312e81 60%,#581c87 85%,#7c2d92 100%);
    }

    /* --- PASS --- */
    .pass{
      width:min(1160px, 100%); aspect-ratio:3/1; position:relative; border-radius:24px; overflow:hidden;
      background:linear-gradient(135deg,#1a1a1a 0%,#2b2b2b 50%,#171717 100%);
      box-shadow:
        0 40px 100px rgba(0,0,0,.55),
        inset 0 0 0 1px rgba(255,255,255,.06);
      isolation:isolate;
      transform-style:preserve-3d;
      transition:transform .3s ease;
    }
    .pass:hover{ transform:perspective(1200px) rotateX(2deg) rotateY(-2.5deg) }

    /* Animated aurora + noise */
    .pass::before{
      content:""; position:absolute; inset:-1px; z-index:0; pointer-events:none; border-radius:inherit;
      background:
        radial-gradient(900px 600px at 40% 60%, color-mix(in oklab, var(--magenta) 16%, transparent) 0%, transparent 65%),
        radial-gradient(700px 500px at 78% 22%, color-mix(in oklab, var(--bronze) 18%, transparent) 0%, transparent 70%),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.045'/%3E%3C/svg%3E");
      background-size:180% 180%;
      animation:aurora 12s ease-in-out infinite;
    }
    @keyframes aurora{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}

    /* Foil gradient border (mask trick) */
    .foil{
      position:absolute; inset:0; border-radius:inherit; padding:2px; z-index:2; pointer-events:none;
      -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude;
      background:
        conic-gradient(from 0deg at 50% 50%, #ffd1e6, #ffe8a3, #a3ffef, #bca5ff, #ffd1e6);
      opacity:.6;
    }

    .grid3{ position:relative; z-index:1; display:grid; grid-template-columns:25% 1fr 30%; height:100% }

    /* Perforation with micro holes */
    .perforate{ position:absolute; left:25%; top:0; bottom:0; width:14px; z-index:3; pointer-events:none; }
    .perforate::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(circle, rgba(255,255,255,.9) 2px, transparent 3px) left/14px 18px repeat-y;
      opacity:.25;
    }

    /* LEFT STUB */
    .stub{
      position:relative; padding:22px 18px; border-right:3px dashed rgba(255,255,255,.48);
      background:linear-gradient(145deg,var(--bronze) 0%, #87611c 48%, #232323 100%);
      box-shadow: inset -10px 0 20px rgba(0,0,0,.35);
      display:flex; flex-direction:column; justify-content:space-between; border-radius:24px 0 0 24px;
    }
    .stub .vertical{
      writing-mode:vertical-rl; text-orientation:mixed; letter-spacing:1px;
      font:700 10px/1 Inter; color:rgba(255,255,255,.95); text-shadow:0 1px 0 rgba(0,0,0,.4);
    }
    .qr-wrap{display:flex; flex-direction:column; align-items:center; gap:12px}
    .qr-label{ font-family:"IBM Plex Mono",monospace; font-weight:700; font-size:11px; letter-spacing:.9px; color:#fff; text-transform:uppercase }
    .qr-frame{
      width:186px; height:186px; display:grid; place-items:center; border-radius:16px;
      background:#fff; outline:4px solid #202022; box-shadow:0 12px 28px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.06) inset;
    }
    .qr-frame svg{ width:172px; height:172px; shape-rendering:crispEdges; image-rendering:pixelated; border-radius:10px }
    .ticket-meta{ text-align:center; color:rgba(255,255,255,.95); font-family:"IBM Plex Mono",monospace; font-size:11px }
    .ticket-meta .muted{ opacity:.75; font-size:10px }
    .stub-msg{ font-size:10px; color:rgba(255,255,255,.9); text-align:center; line-height:1.35 }

    /* CENTER PANEL with Guilloch√© security pattern */
    .center{
      position:relative; padding:30px 36px; background:linear-gradient(135deg,#2a2a2a,#1a1a1a 50%,#272727);
      border-inline:1px solid rgba(255,255,255,.12); display:flex; flex-direction:column; justify-content:center;
    }
    .center::before{
      content:"ENTRY PASS"; position:absolute; top:12px; right:16px; z-index:2;
      font:700 10px/1 "IBM Plex Mono",monospace; letter-spacing:1px; color:color-mix(in oklab, var(--bronze) 75%, #fff);
    }
    .guilloche{
      position:absolute; inset:12% 8% 14% 8%; z-index:0; opacity:.18; filter:contrast(120%) saturate(110%);
      background: url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">\
      <defs><radialGradient id="g" cx="50%" cy="50%"><stop offset="0%" stop-color="%23ffffff"/><stop offset="100%" stop-color="%23000000" stop-opacity="0"/></radialGradient></defs>\
      <g fill="none" stroke="%23ffffff" stroke-opacity="0.6" stroke-width="0.6">\
      <path d="M0,150 Q150,0 300,150 T600,150" /><path d="M0,160 Q150,10 300,160 T600,160" /><path d="M0,140 Q150,-10 300,140 T600,140" />\
      </g></svg>') center/cover no-repeat;
    }
    .brandline{ display:flex; justify-content:space-between; color:#fff; letter-spacing:.8px; text-transform:uppercase; font-weight:800; font-size:12px; z-index:1 }
    .headline{ text-align:center; letter-spacing:3px; line-height:.86; margin:12px 0 10px; z-index:1 }
    .hl{ font-family:"Bebas Neue"; font-size:clamp(38px, 6.2vw, 58px) }
    .hl.solid{ color:var(--magenta); text-shadow:0 0 18px color-mix(in oklab, var(--magenta) 60%, transparent), 2px 2px 4px rgba(0,0,0,.85) }
    .hl.outline{ color:transparent; -webkit-text-stroke:3px var(--magenta); text-shadow:0 0 14px color-mix(in oklab, var(--magenta) 45%, transparent) }
    .sub{ color:rgba(255,255,255,.88); font-size:12px; margin-bottom:10px; z-index:1 }
    .kvs{ color:#fff; z-index:1 }
    .day{ font-size:11px; letter-spacing:1px; text-transform:uppercase; opacity:.85 }
    .dnum{ font-size:20px; font-weight:900; margin:2px 0 4px }
    .venue{ display:flex; align-items:center; gap:6px; font-size:12px }
    .pin{ width:14px; height:14px; opacity:.8 }

    /* RIGHT POSTER + HOLOGRAM SEAL */
    .poster{ position:relative; border-left:1px solid rgba(255,255,255,.12); border-radius:0 24px 24px 0; overflow:hidden }
    .poster .img{ position:absolute; inset:0; background-size:cover; background-position:center; opacity:.95 }
    .poster .veil{ position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(60deg, rgba(175,132,75,.2) 0%, transparent 50%),
        linear-gradient(140deg, rgba(255,31,182,.12) 0%, transparent 70%),
        radial-gradient(600px 400px at 70% 30%, rgba(175,132,75,.08) 0%, transparent 60%);
    }
    .poster .content{ position:relative; height:100%; padding:22px; display:flex; flex-direction:column; justify-content:space-between }
    .brand-corner{ align-self:flex-end; font-size:10px; color:rgba(255,255,255,.98); font-weight:900; letter-spacing:1px; text-transform:uppercase }
    .ptitle{text-align:center}
    .p-swar{ color:#fff; font-style:italic; font-size:18px; margin-bottom:-6px; text-shadow:0 0 10px rgba(255,255,255,.35) }
    .p-safar{ font-family:"Bebas Neue"; color:var(--magenta); font-size:42px; font-weight:900; line-height:.8; letter-spacing:2px;
      text-shadow:0 0 26px color-mix(in oklab, var(--magenta) 55%, transparent), 2px 2px 6px rgba(0,0,0,.9) }
    .p-jam{ color:#fff; font-style:italic; font-size:16px; margin-left:8px; text-shadow:0 0 12px rgba(255,255,255,.4) }

    .holo{
      position:absolute; top:14px; right:14px; width:64px; height:64px; z-index:3;
      border-radius:50%;
      background:
        conic-gradient(from 0deg, #ff93d6, #ffe27a, #97f7ff, #b9a5ff, #ff93d6);
      box-shadow:0 8px 20px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.35);
      animation:spin 6s linear infinite;
      display:grid; place-items:center; color:#111; font:900 10px/1 Inter; text-transform:uppercase;
      -webkit-mask:radial-gradient(circle at 50% 50%, #000 58%, transparent 60%);
    }
    .holo::after{
      content:attr(data-tier);
      position:absolute; inset:8px; border-radius:999px; display:grid; place-items:center;
      background:rgba(255,255,255,.9); letter-spacing:.8px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* PRINT */
    @media print{
      body *{ visibility:hidden !important }
      #pass,#pass *{ visibility:visible !important }
      #pass{ position:fixed; inset:0; margin:auto; width:100%; max-width:none; background:#fff; padding:18px; box-sizing:border-box }
      .noprint{ display:none !important }
      .pass{ border:2px solid #d0d0d0; box-shadow:none; transform:none }
    }

    /* MOBILE */
    @media (max-width: 820px){
      .grid3{ grid-template-columns:1fr; height:auto }
      .perforate{ display:none }
      .stub{ border-right:0; border-bottom:3px dashed rgba(255,255,255,.48); border-radius:24px 24px 0 0 }
      .center{ border-inline:0 }
      .poster{ border-left:0; border-radius:0 0 24px 24px }
      .qr-frame{ width:230px; height:230px }
      .qr-frame svg{ width:216px; height:216px }
    }
  </style>
</head>
<body>
  <div class="w-full max-w-[1180px] space-y-4">
    <div class="flex items-center justify-between noprint">
      <h1 class="text-white/90 font-semibold">Attendee Verification</h1>
      <div class="space-x-2">
        <button id="shareBtn" class="px-3 py-2 rounded bg-white/10 text-white hover:bg-white/20">Share</button>
        <button id="printBtn" class="px-3 py-2 rounded bg-white/10 text-white hover:bg-white/20">Print Pass</button>
      </div>
    </div>

    <!-- states -->
    <div id="loading" class="text-center text-white/80 noprint">Verifying your details‚Ä¶</div>
    <div id="notFound" class="hidden text-center noprint">
      <div class="text-white text-xl font-semibold mb-1">Pass Not Found</div>
      <div class="text-pink-200">QR ID: <span id="badId" class="font-mono"></span></div>
    </div>

    <!-- PASS -->
    <div id="pass" class="hidden">
      <div class="pass" id="card">
        <div class="foil"></div>
        <div class="perforate"></div>
        <div class="grid3">
          <!-- LEFT -->
          <aside class="stub">
            <div class="vertical">OPEN SITTING ARRANGEMENT</div>
            <div class="qr-wrap">
              <div class="qr-label">SCAN TO CHECK-IN</div>
              <div class="qr-frame"><div id="qrBox"></div></div>
              <div class="ticket-meta">
                <div class="muted">TICKET ID</div>
                <div id="qrStub" class="font-mono font-semibold"></div>
                <div class="muted">shifoyage</div>
              </div>
            </div>
            <div class="stub-msg">Please come with an open heart and spirit of togetherness to truly experience the event.</div>
          </aside>

          <!-- CENTER -->
          <main class="center">
            <div class="guilloche"></div>
            <div class="brandline"><span id="brandTop">Shifoyage</span><span>Presents</span></div>
            <div class="headline">
              <div class="hl solid">SWAR-E-SAFAR</div>
              <div class="hl outline">SWAR-E-SAFAR</div>
              <div class="hl solid">SWAR-E-SAFAR</div>
            </div>
            <div class="sub" id="attendeeName" style="display:none"></div>
            <div class="kvs">
              <div class="day">SUNDAY</div>
              <div id="dateNum" class="dnum">21.09.2025</div>
              <div class="venue">
                <svg class="pin" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/></svg>
                <span id="venueTxt">Chai Kaapi, E3 Arera Colony, Bhopal</span>
              </div>
            </div>
          </main>

          <!-- RIGHT -->
          <section class="poster">
            <div id="posterImg" class="img" style="background-image:none"></div>
            <div class="veil"></div>
            <div class="holo" id="holoSeal" data-tier="GENERAL"></div>
            <div class="content">
              <div id="brandCorner" class="brand-corner">Shifoyage</div>
              <div class="ptitle">
                <div class="p-swar">Swar-e</div>
                <div class="p-safar">SAFAR</div>
                <div class="p-jam">jamming</div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Demo dataset (replace with Firestore/API)
    const attendees = [
      { id:"12345678", fullName:"John Doe", qrId:"QR12345678" },
      { id:"87654321", fullName:"Jane Smith", qrId:"QR87654321" },
      { id:"11223344", fullName:"Rahul Sharma", qrId:"QR11223344" },
      { id:"55667788", fullName:"Priya Patel", qrId:"QR55667788" },
      { id:"99887766", fullName:"Amit Kumar", qrId:"QR99887766" }
    ];

    const $ = s => document.querySelector(s);
    const qs = new URLSearchParams(location.search);
    const qrId = (qs.get("qrId")||"").trim();
    const brand = qs.get("brand") || "Shifoyage";
    const dateStr = qs.get("date") || "21.09.2025";
    const venue = qs.get("venue") || "Chai Kaapi, E3 Arera Colony, Bhopal";
    const poster = qs.get("poster");
    const tier = (qs.get("tier") || "GENERAL").toUpperCase();
    const name = qs.get("name");

    function show(id){ $(id).classList.remove("hidden"); }
    function hide(id){ $(id).classList.add("hidden"); }

    // Crystal-clear QR (SVG)
    function renderQR(text, boxId){
      const box = document.getElementById(boxId);
      box.innerHTML = "";
      try{
        const qr = qrcode(0, 'H'); // high error correction
        qr.addData(text);
        qr.make();
        const svg = qr.createSvgTag(9, 4, "#000000", "#FFFFFF"); // fat quiet zone
        box.innerHTML = svg;
        const el = box.querySelector("svg");
        if(el){
          el.setAttribute("aria-label","QR code");
          el.setAttribute("role","img");
          el.style.display = "block";
          el.style.background = "#FFFFFF";
          el.style.borderRadius = "10px";
        }
      }catch(err){
        box.innerHTML = '<div style="width:172px;height:172px;background:#fff;border:2px solid #ccc;display:grid;place-items:center;font:12px/1 Inter;color:#666">QR Error</div>';
      }
    }

    function init(){
      $("#brandTop").textContent = brand;
      $("#brandCorner").textContent = brand;
      $("#dateNum").textContent = dateStr;
      $("#venueTxt").textContent = venue;
      if(poster){ $("#posterImg").style.backgroundImage = `url('${poster}')`; }
      const holo = $("#holoSeal");
      holo.dataset.tier = tier;
      if(tier === "VIP"){ holo.style.setProperty("filter","drop-shadow(0 0 8px rgba(255, 209, 102, .65))"); }

      if(name){
        const el = $("#attendeeName");
        el.style.display = "block";
        el.textContent = `Issued to: ${name}`;
      }

      if(!qrId){
        hide("#loading"); show("#notFound"); $("#badId").textContent = "No QR ID in URL"; return;
      }

      // Simulate lookup
      setTimeout(()=>{
        const user = attendees.find(a => a.qrId.toLowerCase() === qrId.toLowerCase());
        hide("#loading");
        if(!user){ show("#notFound"); $("#badId").textContent = qrId; return; }

        $("#qrStub").textContent = user.qrId;
        renderQR(user.qrId, "qrBox");
        show("#pass");
      }, 400);
    }

    // Share pass link
    document.getElementById("shareBtn").addEventListener("click", async ()=>{
      const url = location.href;
      if(navigator.share){
        try{ await navigator.share({ title:"Your Entry Pass", text:"Here is your pass link", url }); }catch{}
      }else{
        await navigator.clipboard.writeText(url);
        alert("Link copied!");
      }
    });

    document.getElementById("printBtn").addEventListener("click", ()=>window.print());
    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
