<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Premium Entry Pass</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/qrcode-generator@1.4.4/qrcode.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Bebas+Neue&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --magenta:#FF1FB6; --bronze:#AF844B; --charcoal:#0F0F10; --ink:#121212;
      --vip:#FFD166; --gen:#A0AEC0; --neon-pink:#FF00FF; --neon-cyan:#00FFFF;
      --neon-green:#39FF14; --purple:#8A2BE2;
    }
    *{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}

    body{
      min-height:100dvh; padding:18px; display:flex; align-items:center; justify-content:center;
      background:
        radial-gradient(1200px 600px at 20% 20%, #3b0764 0%, transparent 55%),
        radial-gradient(900px 550px at 80% 80%, #0b132b 0%, transparent 60%),
        linear-gradient(135deg,#0f172a 0%,#1e1b4b 30%,#312e81 60%,#581c87 85%,#7c2d92 100%);
      position: relative;
      overflow: hidden;
    }

    /* Floating particles background */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--neon-pink), var(--neon-cyan));
      animation: float 6s ease-in-out infinite;
      opacity: 0.1;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
      25% { transform: translateY(-20px) translateX(10px) rotate(90deg); }
      50% { transform: translateY(0px) translateX(-10px) rotate(180deg); }
      75% { transform: translateY(-10px) translateX(5px) rotate(270deg); }
    }

    /* --- PASS --- */
    .pass{
      width:min(1160px, 100%); aspect-ratio:2.5/1; position:relative; border-radius:24px; overflow:hidden;
      background:linear-gradient(135deg,#1a1a1a 0%,#2b2b2b 50%,#171717 100%);
      box-shadow:
        0 40px 100px rgba(0,0,0,.55),
        inset 0 0 0 1px rgba(255,255,255,.06),
        0 0 50px rgba(255,31,182,.3);
      isolation:isolate;
      transform-style:preserve-3d;
      transition:all .5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      animation: passGlow 4s ease-in-out infinite alternate;
    }
    .pass:hover{
      transform:perspective(1200px) rotateX(2deg) rotateY(-2.5deg) scale(1.02);
      box-shadow:
        0 50px 120px rgba(0,0,0,.65),
        inset 0 0 0 1px rgba(255,255,255,.12),
        0 0 80px rgba(255,31,182,.5);
    }

    @keyframes passGlow {
      0% { box-shadow: 0 40px 100px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.06), 0 0 30px rgba(255,31,182,.2); }
      100% { box-shadow: 0 40px 100px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.06), 0 0 60px rgba(255,31,182,.4); }
    }

    /* Animated aurora + noise */
    .pass::before{
      content:""; position:absolute; inset:-1px; z-index:0; pointer-events:none; border-radius:inherit;
      background:
        radial-gradient(900px 600px at 40% 60%, color-mix(in oklab, var(--magenta) 16%, transparent) 0%, transparent 65%),
        radial-gradient(700px 500px at 78% 22%, color-mix(in oklab, var(--bronze) 18%, transparent) 0%, transparent 70%),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.045'/%3E%3C/svg%3E");
      background-size:180% 180%;
      animation:aurora 12s ease-in-out infinite;
    }
    @keyframes aurora{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}

    /* Foil gradient border (mask trick) */
    .foil{
      position:absolute; inset:0; border-radius:inherit; padding:2px; z-index:2; pointer-events:none;
      -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude;
      background:
        conic-gradient(from 0deg at 50% 50%, #ffd1e6, #ffe8a3, #a3ffef, #bca5ff, #ffd1e6);
      opacity:.6;
    }

    .grid3{ position:relative; z-index:1; display:grid; grid-template-columns:25% 1fr 30%; height:100% }

    /* Perforation with micro holes */
    .perforate{ position:absolute; left:25%; top:0; bottom:0; width:14px; z-index:3; pointer-events:none; }
    .perforate::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(circle, rgba(255,255,255,.9) 2px, transparent 3px) left/14px 18px repeat-y;
      opacity:.25;
    }

    /* LEFT STUB */
    .stub{
      position:relative; padding:25px 18px; border-right:3px dashed rgba(255,255,255,.48);
      background:linear-gradient(145deg,var(--bronze) 0%, #87611c 48%, #232323 100%);
      box-shadow: inset -10px 0 20px rgba(0,0,0,.35);
      display:flex; flex-direction:column; justify-content:space-between; border-radius:24px 0 0 24px;
      min-height: 100%;
    }
    .stub .vertical{
      writing-mode:vertical-rl; text-orientation:mixed; letter-spacing:1px;
      font:700 10px/1 Inter; color:rgba(255,255,255,.95); text-shadow:0 1px 0 rgba(0,0,0,.4);
    }
    .qr-wrap{display:flex; flex-direction:column; align-items:center; gap:10px; flex: 1; justify-content: center;}
    .qr-label{ font-family:"IBM Plex Mono",monospace; font-weight:700; font-size:11px; letter-spacing:.9px; color:#fff; text-transform:uppercase }
    .qr-frame{
      width:200px; height:200px; display:grid; place-items:center; border-radius:16px;
      background:#fff; outline:4px solid #202022;
      box-shadow:0 12px 28px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.06) inset, 0 0 20px rgba(255,31,182,.3);
      transition: all .3s ease;
      animation: qrPulse 3s ease-in-out infinite;
      margin: 0 auto;
    }
    .qr-frame:hover {
      transform: scale(1.05);
      box-shadow:0 15px 35px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.12) inset, 0 0 30px rgba(255,31,182,.5);
    }

    @keyframes qrPulse {
      0%, 100% { box-shadow:0 12px 28px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.06) inset, 0 0 15px rgba(255,31,182,.2); }
      50% { box-shadow:0 12px 28px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.06) inset, 0 0 25px rgba(255,31,182,.4); }
    }
    .qr-frame svg{ width:185px; height:185px; shape-rendering:crispEdges; image-rendering:pixelated; border-radius:10px }
    .ticket-meta{ text-align:center; color:rgba(255,255,255,.95); font-family:"IBM Plex Mono",monospace; font-size:11px }
    .ticket-meta .muted{ opacity:.75; font-size:10px }
    .stub-msg{ font-size:10px; color:rgba(255,255,255,.9); text-align:center; line-height:1.35 }

    /* CENTER PANEL with Guilloch√© security pattern */
    .center{
      position:relative; padding:35px 30px; background:linear-gradient(135deg,#2a2a2a,#1a1a1a 50%,#272727);
      border-inline:1px solid rgba(255,255,255,.12); display:flex; flex-direction:column; justify-content:space-between;
      min-height: 100%;
    }
    .center::before{
      content:"ENTRY PASS"; position:absolute; top:12px; right:16px; z-index:2;
      font:700 10px/1 "IBM Plex Mono",monospace; letter-spacing:1px; color:color-mix(in oklab, var(--bronze) 75%, #fff);
    }
    .guilloche{
      position:absolute; inset:12% 8% 14% 8%; z-index:0; opacity:.18; filter:contrast(120%) saturate(110%);
      background: url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">\
      <defs><radialGradient id="g" cx="50%" cy="50%"><stop offset="0%" stop-color="%23ffffff"/><stop offset="100%" stop-color="%23000000" stop-opacity="0"/></radialGradient></defs>\
      <g fill="none" stroke="%23ffffff" stroke-opacity="0.6" stroke-width="0.6">\
      <path d="M0,150 Q150,0 300,150 T600,150" /><path d="M0,160 Q150,10 300,160 T600,160" /><path d="M0,140 Q150,-10 300,140 T600,140" />\
      </g></svg>') center/cover no-repeat;
    }
    .brandline{ display:flex; justify-content:space-between; color:#fff; letter-spacing:.8px; text-transform:uppercase; font-weight:800; font-size:12px; z-index:1 }
    .headline{ text-align:center; letter-spacing:1px; line-height:.86; margin:12px 0 10px; z-index:1; display: flex; justify-content: center; align-items: center; gap: 2px; flex-wrap: wrap; }
    .hl{ font-family:"Bebas Neue"; font-size:clamp(32px, 5.2vw, 48px); display: inline-block; }
    .hl.solid{
      color:var(--magenta);
      text-shadow:0 0 18px color-mix(in oklab, var(--magenta) 60%, transparent), 2px 2px 4px rgba(0,0,0,.85);
      animation: textGlow 2s ease-in-out infinite alternate;
    }
    .hl.outline{
      color:transparent;
      -webkit-text-stroke:3px var(--magenta);
      text-shadow:0 0 14px color-mix(in oklab, var(--magenta) 45%, transparent);
      animation: outlineShimmer 3s ease-in-out infinite;
    }

    @keyframes textGlow {
      0% { text-shadow:0 0 18px color-mix(in oklab, var(--magenta) 60%, transparent), 2px 2px 4px rgba(0,0,0,.85); }
      100% { text-shadow:0 0 30px color-mix(in oklab, var(--magenta) 80%, transparent), 2px 2px 4px rgba(0,0,0,.85); }
    }

    @keyframes outlineShimmer {
      0%, 100% { -webkit-text-stroke:3px var(--magenta); text-shadow:0 0 14px color-mix(in oklab, var(--magenta) 45%, transparent); }
      50% { -webkit-text-stroke:3px var(--neon-cyan); text-shadow:0 0 20px color-mix(in oklab, var(--neon-cyan) 60%, transparent); }
    }
    .sub{ color:rgba(255,255,255,.88); font-size:12px; margin-bottom:12px; z-index:1 }
    .kvs{ color:#fff; z-index:1 }
    .day{ font-size:11px; letter-spacing:1px; text-transform:uppercase; opacity:.85 }
    .dnum{ font-size:24px; font-weight:900; margin:4px 0 8px; line-height: 1.2; }
    .venue{ display:flex; align-items:center; gap:6px; font-size:12px; margin-top: 8px; }
    .pin{ width:14px; height:14px; opacity:.8 }

    /* RIGHT POSTER + HOLOGRAM SEAL */
    .poster{ position:relative; border-left:1px solid rgba(255,255,255,.12); border-radius:0 24px 24px 0; overflow:hidden }
    .poster .img{ position:absolute; inset:0; background-size:cover; background-position:center; opacity:.95 }
    .poster .veil{ position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(60deg, rgba(175,132,75,.2) 0%, transparent 50%),
        linear-gradient(140deg, rgba(255,31,182,.12) 0%, transparent 70%),
        radial-gradient(600px 400px at 70% 30%, rgba(175,132,75,.08) 0%, transparent 60%);
    }
    .poster .content{ position:relative; height:100%; padding:22px; display:flex; flex-direction:column; justify-content:space-between }
    .brand-corner{ align-self:flex-end; font-size:10px; color:rgba(255,255,255,.98); font-weight:900; letter-spacing:1px; text-transform:uppercase }
    .ptitle{text-align:center}
    .p-swar{ color:#fff; font-style:italic; font-size:18px; margin-bottom:-6px; text-shadow:0 0 10px rgba(255,255,255,.35) }
    .p-safar{ font-family:"Bebas Neue"; color:var(--magenta); font-size:42px; font-weight:900; line-height:.8; letter-spacing:2px;
      text-shadow:0 0 26px color-mix(in oklab, var(--magenta) 55%, transparent), 2px 2px 6px rgba(0,0,0,.9) }
    .p-jam{ color:#fff; font-style:italic; font-size:16px; margin-left:8px; text-shadow:0 0 12px rgba(255,255,255,.4) }

    .holo{
      position:absolute; top:14px; right:14px; width:64px; height:64px; z-index:3;
      border-radius:50%;
      background:
        conic-gradient(from 0deg, #ff93d6, #ffe27a, #97f7ff, #b9a5ff, #ff93d6);
      box-shadow:0 8px 20px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.35), 0 0 25px rgba(255,31,182,.6);
      animation:spin 6s linear infinite, holoPulse 2s ease-in-out infinite;
      display:grid; place-items:center; color:#111; font:900 10px/1 Inter; text-transform:uppercase;
      -webkit-mask:radial-gradient(circle at 50% 50%, #000 58%, transparent 60%);
      transition: transform .3s ease;
    }
    .holo:hover {
      transform: scale(1.1);
      animation-duration: 3s, 1s;
    }

    @keyframes holoPulse {
      0%, 100% { box-shadow:0 8px 20px rgba(0,0,0,.35), inset 0 0 12px rgba(255,255,255,.35), 0 0 20px rgba(255,31,182,.4); }
      50% { box-shadow:0 10px 25px rgba(0,0,0,.45), inset 0 0 15px rgba(255,255,255,.45), 0 0 35px rgba(255,31,182,.8); }
    }
    .holo::after{
      content:attr(data-tier);
      position:absolute; inset:8px; border-radius:999px; display:grid; place-items:center;
      background:rgba(255,255,255,.9); letter-spacing:.8px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Confetti animation */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #f0f;
      animation: confetti-fall 3s linear infinite;
      z-index: 1000;
      pointer-events: none;
    }

    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Success animation for pass */
    .pass.verified {
      animation: passGlow 4s ease-in-out infinite alternate, successPulse 0.6s ease-out;
    }

    @keyframes successPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* Toast animations */
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(100%);
      }
    }

    /* PRINT */
    @media print{
      body *{ visibility:hidden !important }
      #pass,#pass *{ visibility:visible !important }
      #pass{ position:fixed; inset:0; margin:auto; width:100%; max-width:none; background:#fff; padding:18px; box-sizing:border-box }
      .noprint{ display:none !important }
      .pass{ border:2px solid #d0d0d0; box-shadow:none; transform:none }
    }

    /* MOBILE */
    @media (max-width: 820px){
      body{ padding: 12px; }
      .pass{
        width: 100%;
        aspect-ratio: 1/1.4;
        max-width: 420px;
        margin: 0 auto;
      }
      .grid3{
        grid-template-columns: 1fr;
        height: auto;
        grid-template-rows: auto auto auto;
      }
      .perforate{ display: none }
      .stub{
        border-right: 0;
        border-bottom: 3px dashed rgba(255,255,255,.48);
        border-radius: 24px 24px 0 0;
        padding: 20px 15px;
        min-height: auto;
      }
      .center{
        border-inline: 0;
        padding: 25px 20px;
        min-height: auto;
      }
      .poster{
        border-left: 0;
        border-radius: 0 0 24px 24px;
        min-height: 200px;
      }
      .qr-frame{
        width: 180px;
        height: 180px;
        margin: 10px auto;
      }
      .qr-frame svg{ width: 165px; height: 165px }
      .qr-wrap{
        align-items: center;
        gap: 8px;
      }
      .qr-label{ font-size: 9px; }
      .ticket-meta{ font-size: 10px; }
      .headline{
        gap: 1px;
        margin: 8px 0 8px;
      }
      .hl{ font-size: clamp(24px, 4vw, 32px); }
      .sub{ font-size: 11px; margin-bottom: 8px; }
      .dnum{ font-size: 20px; }
      .venue{ font-size: 11px; }
      .brandline{ font-size: 11px; }
      .vertical{ font-size: 9px; }
      .stub-msg{ font-size: 9px; line-height: 1.3; }
      .holo{
        width: 50px;
        height: 50px;
        top: 10px;
        right: 10px;
        font-size: 8px;
      }
      .p-swar{ font-size: 14px; }
      .p-safar{ font-size: 32px; }
      .p-jam{ font-size: 13px; }
      .poster .content{ padding: 16px; }
    }

    @media (max-width: 480px){
      body{ padding: 8px; }
      .pass{
        aspect-ratio: 1/1.5;
        max-width: 100%;
      }
      .stub{ padding: 15px 12px; }
      .center{ padding: 20px 15px; }
      .qr-frame{
        width: 140px;
        height: 140px;
      }
      .qr-frame svg{ width: 128px; height: 128px }
      .hl{ font-size: clamp(20px, 3.5vw, 28px); }
      .dnum{ font-size: 18px; }
      .holo{
        width: 40px;
        height: 40px;
        font-size: 7px;
      }
      .p-safar{ font-size: 28px; }
      .poster .content{ padding: 12px; }

      /* Header adjustments for mobile */
      .w-full.max-w-\[1180px\].space-y-4 h1 {
        font-size: 18px;
      }
      .space-x-3 button {
        padding: 8px 12px;
        font-size: 14px;
      }
    }

    @media (max-width: 360px){
      .pass{ aspect-ratio: 1/1.6; }
      .qr-frame{
        width: 120px;
        height: 120px;
      }
      .qr-frame svg{ width: 110px; height: 110px }
      .hl{ font-size: clamp(18px, 3vw, 24px); }
      .stub{ padding: 12px 10px; }
      .center{ padding: 16px 12px; }
      .poster .content{ padding: 10px; }
    }
  </style>
</head>
<body>
  <!-- Floating particles -->
  <div class="particles">
    <div class="particle" style="width: 4px; height: 4px; top: 20%; left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="width: 6px; height: 6px; top: 60%; left: 80%; animation-delay: 2s;"></div>
    <div class="particle" style="width: 3px; height: 3px; top: 40%; left: 90%; animation-delay: 4s;"></div>
    <div class="particle" style="width: 5px; height: 5px; top: 80%; left: 20%; animation-delay: 1s;"></div>
    <div class="particle" style="width: 4px; height: 4px; top: 10%; left: 70%; animation-delay: 3s;"></div>
    <div class="particle" style="width: 7px; height: 7px; top: 70%; left: 50%; animation-delay: 5s;"></div>
  </div>

  <div class="w-full max-w-[1180px] space-y-4">
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 noprint">
      <h1 class="text-white/90 font-semibold text-xl">üé´ Attendee Verification</h1>
      <div class="flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto">
        <button id="shareBtn" class="group px-4 py-2 rounded-lg bg-gradient-to-r from-pink-500/20 to-purple-500/20 text-white hover:from-pink-500/30 hover:to-purple-500/30 border border-pink-500/30 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-pink-500/25 text-sm sm:text-base">
          <span class="flex items-center justify-center gap-2">
            üì§ <span class="group-hover:animate-pulse">Share</span>
          </span>
        </button>
        <button id="printBtn" class="group px-4 py-2 rounded-lg bg-gradient-to-r from-cyan-500/20 to-blue-500/20 text-white hover:from-cyan-500/30 hover:to-blue-500/30 border border-cyan-500/30 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/25 text-sm sm:text-base">
          <span class="flex items-center justify-center gap-2">
            üñ®Ô∏è <span class="group-hover:animate-pulse">Print Pass</span>
          </span>
        </button>
      </div>
    </div>

    <!-- states -->
    <div id="loading" class="text-center text-white/80 noprint">
      <div class="flex items-center justify-center gap-3">
        <div class="animate-spin text-2xl">üîç</div>
        <div class="text-lg animate-pulse">Verifying your magical pass details‚Ä¶</div>
      </div>
      <div class="mt-2 text-sm text-white/60 animate-bounce">‚ú® Please wait while we work our magic ‚ú®</div>
    </div>
    <div id="notFound" class="hidden text-center noprint">
      <div class="bg-gradient-to-br from-red-500/20 to-pink-500/20 border border-red-500/30 rounded-xl p-6 backdrop-blur-sm">
        <div class="text-4xl mb-3 animate-bounce">üö´</div>
        <div class="text-white text-xl font-semibold mb-2">Oops! Pass Not Found</div>
        <div class="text-pink-200 mb-3">QR ID: <span id="badId" class="font-mono bg-black/30 px-2 py-1 rounded"></span></div>
        <div class="text-sm text-white/70">üé≠ This pass seems to have vanished into thin air!</div>
      </div>
    </div>

    <!-- PASS -->
    <div id="pass" class="hidden">
      <div class="pass" id="card">
        <div class="foil"></div>
        <div class="perforate"></div>
        <div class="grid3">
          <!-- LEFT -->
          <aside class="stub">
            <div class="vertical">‚ú® OPEN SITTING ARRANGEMENT ‚ú®</div>
            <div class="qr-wrap">
              <div class="qr-label">üîÆ CHECK-IN AFTER ENTERING THE VENUE üîÆ</div>
              <div class="qr-frame"><div id="qrBox"></div></div>
              <div class="ticket-meta">
                <div class="muted">üé´ TICKET ID</div>
                <div id="qrStub" class="font-mono font-semibold"></div>
                <div class="muted">üé≠ shifoyage</div>
              </div>
            </div>
            <div class="stub-msg">üíñ Please come with an open heart and a spirit of togetherness ‚Äî that's all you need to truly experience the event. üåü</div>
          </aside>

          <!-- CENTER -->
          <main class="center">
            <div class="guilloche"></div>
            <div class="brandline"><span id="brandTop">Shifoyage</span><span>Presents</span></div>
            <div class="headline">
              <div class="hl solid">s</div>
              <div class="hl outline">h i f</div>
              <div class="hl solid">o</div>
              <div class="hl outline">y</div>
              <div class="hl solid">a</div>
              <div class="hl outline">g</div>
              <div class="hl solid">e</div>
            </div>
            <div class="sub" style="color: rgba(255,255,255,.95); font-size: 14px; margin: 8px 0;">With special performances</div>
            <div class="sub" id="attendeeName" style="display:none"></div>
            <div class="kvs">
              <div class="day">SUNDAY</div>
              <div id="dateNum" class="dnum">21.09.2025</div>
              <div class="venue">
                <svg class="pin" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/></svg>
                <span id="venueTxt">Chai Kaapi, E 3 Arera Colony, Bhopal</span>
              </div>
            </div>
          </main>

          <!-- RIGHT -->
          <section class="poster">
            <div id="posterImg" class="img" style="background-image:url('WhatsApp Image 2025-09-21 at 11.30.44 AM.jpeg')"></div>
            <div class="veil"></div>
            <div class="holo" id="holoSeal" data-tier="GENERAL"></div>
            <div class="content">
              <div id="brandCorner" class="brand-corner">Shifoyage</div>
              <div class="ptitle">
                <div class="p-swar">Swar-e</div>
                <div class="p-safar">SAFAR</div>
                <div class="p-jam">jamming</div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Demo dataset (replace with Firestore/API)
    const attendees = [
      { id:"12345678", fullName:"John Doe", qrId:"QR12345678" },
      { id:"87654321", fullName:"Jane Smith", qrId:"QR87654321" },
      { id:"11223344", fullName:"Rahul Sharma", qrId:"QR11223344" },
      { id:"55667788", fullName:"Priya Patel", qrId:"QR55667788" },
      { id:"99887766", fullName:"Amit Kumar", qrId:"QR99887766" }
    ];

    const $ = s => document.querySelector(s);
    const qs = new URLSearchParams(location.search);
    const qrId = (qs.get("qrId")||"").trim();
    const brand = qs.get("brand") || "Shifoyage";
    const dateStr = qs.get("date") || "21.09.2025";
    const venue = qs.get("venue") || "Chai Kaapi, E3 Arera Colony, Bhopal";
    const poster = qs.get("poster");
    const tier = (qs.get("tier") || "GENERAL").toUpperCase();
    const name = qs.get("name");

    function show(id){ $(id).classList.remove("hidden"); }
    function hide(id){ $(id).classList.add("hidden"); }

    // Confetti animation
    function createConfetti() {
      const colors = ['#FF1FB6', '#00FFFF', '#39FF14', '#FFD166', '#FF6B6B', '#4ECDC4'];
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
        document.body.appendChild(confetti);

        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }

    // Playful success message
    function showSuccessMessage() {
      const messages = [
        'üéâ Woohoo! Your pass is verified!',
        '‚ú® Magic detected! Welcome aboard!',
        'üé≠ Your ticket to wonderland is ready!',
        'üåü Pass verified! Let the show begin!',
        'üé™ Step right up! Your entry is confirmed!'
      ];
      const message = messages[Math.floor(Math.random() * messages.length)];

      const toast = document.createElement('div');
      toast.innerHTML = `
        <div style="position: fixed; top: 20px; right: 20px; background: linear-gradient(45deg, #FF1FB6, #00FFFF);
                    color: white; padding: 15px 20px; border-radius: 10px; z-index: 9999;
                    animation: slideIn 0.5s ease-out, fadeOut 0.5s ease-in 2.5s forwards;
                    box-shadow: 0 10px 25px rgba(255,31,182,0.3);">
          ${message}
        </div>
      `;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.remove();
      }, 3000);
    }

    // Crystal-clear QR (SVG)
    function renderQR(text, boxId){
      const box = document.getElementById(boxId);
      box.innerHTML = "";
      try{
        const qr = qrcode(0, 'H'); // high error correction
        qr.addData(text);
        qr.make();
        const svg = qr.createSvgTag(8, 3, "#000000", "#FFFFFF"); // fat quiet zone
        box.innerHTML = svg;
        const el = box.querySelector("svg");
        if(el){
          el.setAttribute("aria-label","QR code");
          el.setAttribute("role","img");
          el.style.display = "block";
          el.style.background = "#FFFFFF";
          el.style.borderRadius = "10px";
        }
      }catch(err){
        box.innerHTML = '<div style="width:185px;height:185px;background:#fff;border:2px solid #ccc;display:grid;place-items:center;font:12px/1 Inter;color:#666">QR Error</div>';
      }
    }

    function init(){
      $("#brandTop").textContent = brand;
      $("#brandCorner").textContent = brand;
      $("#dateNum").textContent = dateStr;
      $("#venueTxt").textContent = venue;
      if(poster){ $("#posterImg").style.backgroundImage = `url('${poster}')`; }
      const holo = $("#holoSeal");
      holo.dataset.tier = tier;
      if(tier === "VIP"){ holo.style.setProperty("filter","drop-shadow(0 0 8px rgba(255, 209, 102, .65))"); }

      if(name){
        const el = $("#attendeeName");
        el.style.display = "block";
        el.textContent = `Issued to: ${name}`;
      }

      if(!qrId){
        hide("#loading"); show("#notFound"); $("#badId").textContent = "No QR ID in URL"; return;
      }

      // Simulate lookup
      setTimeout(()=>{
        const user = attendees.find(a => a.qrId.toLowerCase() === qrId.toLowerCase());
        hide("#loading");
        if(!user){ show("#notFound"); $("#badId").textContent = qrId; return; }

        $("#qrStub").textContent = user.qrId;
        renderQR(user.qrId, "qrBox");
        show("#pass");

        // Add success animations and effects
        setTimeout(() => {
          $("#card").classList.add("verified");
          createConfetti();
          showSuccessMessage();
        }, 500);
      }, 800);
    }

    // Share pass link with playful feedback
    document.getElementById("shareBtn").addEventListener("click", async ()=>{
      const btn = document.getElementById("shareBtn");
      const originalText = btn.innerHTML;

      btn.innerHTML = '<span class="flex items-center gap-2">üöÄ <span class="animate-pulse">Sharing...</span></span>';
      btn.disabled = true;

      const url = location.href;
      if(navigator.share){
        try{
          await navigator.share({
            title:"üé≠ Your Magical Entry Pass",
            text:"‚ú® Here's your exclusive pass to Swar-e-Safar! üéµ",
            url
          });
          btn.innerHTML = '<span class="flex items-center gap-2">‚úÖ <span>Shared!</span></span>';
        }catch{
          btn.innerHTML = originalText;
        }
      }else{
        await navigator.clipboard.writeText(url);
        btn.innerHTML = '<span class="flex items-center gap-2">üìã <span>Copied!</span></span>';

        // Create a mini celebration
        const colors = ['#FF1FB6', '#00FFFF', '#39FF14'];
        for(let i = 0; i < 10; i++) {
          const spark = document.createElement('div');
          spark.innerHTML = '‚ú®';
          spark.style.position = 'fixed';
          spark.style.left = btn.offsetLeft + Math.random() * btn.offsetWidth + 'px';
          spark.style.top = btn.offsetTop + Math.random() * btn.offsetHeight + 'px';
          spark.style.color = colors[Math.floor(Math.random() * colors.length)];
          spark.style.fontSize = '20px';
          spark.style.pointerEvents = 'none';
          spark.style.zIndex = '9999';
          spark.style.animation = 'float 1s ease-out forwards';
          document.body.appendChild(spark);

          setTimeout(() => spark.remove(), 1000);
        }
      }

      setTimeout(() => {
        btn.innerHTML = originalText;
        btn.disabled = false;
      }, 2000);
    });

    document.getElementById("printBtn").addEventListener("click", ()=>{
      const btn = document.getElementById("printBtn");
      const originalText = btn.innerHTML;

      btn.innerHTML = '<span class="flex items-center gap-2">üñ®Ô∏è <span class="animate-pulse">Preparing print...</span></span>';

      setTimeout(() => {
        window.print();
        btn.innerHTML = originalText;
      }, 500);
    });
    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
